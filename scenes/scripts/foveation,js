<script>
AFRAME.registerComponent('max-aniso', {
  init() {
    const el = this.el;
    el.addEventListener('materialtextureloaded', () => {
      const r = el.sceneEl.renderer;
      const map = el.getObject3D('mesh')?.material?.map;
      if (r && map) {
        map.anisotropy = r.capabilities.getMaxAnisotropy();
        map.needsUpdate = true;
      }
    });
  }
});

AFRAME.registerComponent('no-foveation', {
  init() {
    const r = this.el.renderer;
    if (r && r.xr && r.xr.setFoveation) {
      r.xr.setFoveation(0); // 0 = no foveation, 1 = strong
    }
  }
});
</script>
